# é…ç½®æ–‡ä»¶ä¿®æ”¹å·¥å…·

ä¸€ä¸ªç®€å•çš„é…ç½®æ–‡ä»¶ä¿®æ”¹å·¥å…·ï¼Œæ”¯æŒé€šè¿‡æ¨¡æ¿ç®¡ç†å¤šä¸ªé…ç½®æ–‡ä»¶çš„ä¿®æ”¹ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **æ¨¡æ¿ç®¡ç†**ï¼šåˆ›å»ºå’Œç®¡ç†é…ç½®æ¨¡æ¿
- ğŸ“ **æ–‡ä»¶å¤„ç†**ï¼šæ”¯æŒä»»æ„æ ¼å¼çš„æ–‡æœ¬é…ç½®æ–‡ä»¶
- ğŸ” **æ™ºèƒ½æœç´¢**ï¼šé€šè¿‡å‰ç¼€/åç¼€åŒ¹é…å®šä½é…ç½®é¡¹
- âš¡ **ä¸€é”®åº”ç”¨**ï¼šæ‰¹é‡ä¿®æ”¹å¤šä¸ªæ–‡ä»¶çš„é…ç½®
- ğŸŒ **Webç•Œé¢**ï¼šç®€æ´ç›´è§‚çš„æµè§ˆå™¨ç•Œé¢

## é¡¹ç›®ç»“æ„

```
config-tool/
â”œâ”€â”€ cmd/app/main.go              # ç¨‹åºå…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ template/                # æ¨¡æ¿ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ models.go           # æ•°æ®ç»“æ„å®šä¹‰
â”‚   â”‚   â””â”€â”€ manager.go          # æ¨¡æ¿CRUDæ“ä½œ
â”‚   â”œâ”€â”€ processor/               # æ–‡ä»¶å¤„ç†æ¨¡å—
â”‚   â”‚   â””â”€â”€ processor.go        # æ–‡ä»¶è¯»å†™å’ŒåŒ¹é…
â”‚   â””â”€â”€ server/                  # WebæœåŠ¡æ¨¡å—
â”‚       â”œâ”€â”€ server.go           # HTTPæœåŠ¡å™¨
â”‚       â””â”€â”€ handlers.go         # APIå¤„ç†å‡½æ•°
â”œâ”€â”€ web/dist/                    # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ index.html              # ä¸»é¡µé¢
â”œâ”€â”€ data/templates/              # æ¨¡æ¿å­˜å‚¨ç›®å½•
â”œâ”€â”€ go.mod                       # Goæ¨¡å—å®šä¹‰
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
```

## å®‰è£…å’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬

### å®‰è£…æ­¥éª¤
1. å…‹éš†é¡¹ç›®
```bash
git clone <é¡¹ç›®åœ°å€>
cd config-tool
```

2. ä¸‹è½½ä¾èµ–
```bash
go mod tidy
```

3. è¿è¡Œç¨‹åº
```bash
go run cmd/app/main.go
```

4. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8080`

### ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶
```bash
go build -o config-tool.exe cmd/app/main.go
```

## ä½¿ç”¨æŒ‡å—

### 1. åˆ›å»ºæ¨¡æ¿
1. åœ¨Webç•Œé¢ç‚¹å‡»"æ–°å»ºæ¨¡æ¿"
2. è¾“å…¥æ¨¡æ¿åç§°å’Œæè¿°
3. ä¿å­˜åæ¨¡æ¿ä¼šå‡ºç°åœ¨å·¦ä¾§åˆ—è¡¨ä¸­

### 2. é…ç½®æ¨¡æ¿ï¼ˆç›®å‰éœ€è¦æ‰‹åŠ¨ç¼–è¾‘JSONæ–‡ä»¶ï¼‰
åœ¨ `data/templates/` ç›®å½•ä¸‹æ‰¾åˆ°å¯¹åº”çš„æ¨¡æ¿æ–‡ä»¶ï¼ŒæŒ‰ä»¥ä¸‹æ ¼å¼æ·»åŠ é…ç½®é¡¹ï¼š

```json
{
  "id": "template-uuid",
  "name": "å¼€å‘ç¯å¢ƒé…ç½®",
  "description": "å¼€å‘ç¯å¢ƒçš„å„é¡¹é…ç½®",
  "items": [
    {
      "id": "item-uuid-1",
      "name": "æ•°æ®åº“åœ°å€",
      "description": "MySQLæ•°æ®åº“è¿æ¥åœ°å€",
      "defaultValue": "localhost",
      "targets": [
        {
          "id": "target-uuid-1",
          "filePath": "C:\\project\\config.ini",
          "lineNumber": 3,
          "prefix": "host=",
          "suffix": ""
        }
      ]
    }
  ]
}
```

### 3. åº”ç”¨é…ç½®
1. åœ¨Webç•Œé¢é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿
2. æŸ¥çœ‹æ¯ä¸ªé…ç½®é¡¹çš„å½“å‰å€¼
3. åœ¨è¾“å…¥æ¡†ä¸­å¡«å†™æ–°å€¼
4. ç‚¹å‡»"ä¸€é”®åº”ç”¨"å®Œæˆä¿®æ”¹

## APIæ¥å£

### æ¨¡æ¿ç®¡ç†
- `GET /api/templates` - è·å–æ¨¡æ¿åˆ—è¡¨
- `GET /api/templates/{id}` - è·å–æ¨¡æ¿è¯¦æƒ…ï¼ˆå«å½“å‰å€¼ï¼‰
- `POST /api/templates` - åˆ›å»º/æ›´æ–°æ¨¡æ¿
- `DELETE /api/templates/{id}` - åˆ é™¤æ¨¡æ¿

### æ–‡ä»¶å¤„ç†
- `POST /api/files/find-matches` - æœç´¢æ–‡ä»¶åŒ¹é…é¡¹
- `POST /api/apply` - æ‰§è¡Œæ–‡ä»¶ä¿®æ”¹

### å“åº”æ ¼å¼
- æˆåŠŸï¼š`{"data": {...}}`
- å¤±è´¥ï¼š`{"error": "é”™è¯¯ä¿¡æ¯"}`

## æ•°æ®ç»“æ„

### æ¨¡æ¿ (Template)
```go
type Template struct {
    ID          string       `json:"id"`
    Name        string       `json:"name"`
    Description string       `json:"description"`
    Items       []ConfigItem `json:"items"`
}
```

### é…ç½®é¡¹ (ConfigItem)
```go
type ConfigItem struct {
    ID           string       `json:"id"`
    Name         string       `json:"name"`
    Description  string       `json:"description"`
    DefaultValue string       `json:"defaultValue"`
    Targets      []FileTarget `json:"targets"`
    CurrentValue string       `json:"currentValue,omitempty"`
}
```

### ç›®æ ‡ç‚¹ (FileTarget)
```go
type FileTarget struct {
    ID         string `json:"id"`
    FilePath   string `json:"filePath"`
    LineNumber int    `json:"lineNumber"`
    Prefix     string `json:"prefix"`
    Suffix     string `json:"suffix,omitempty"`
}
```

## å·¥ä½œåŸç†

1. **æ¨¡æ¿å­˜å‚¨**ï¼šæ¯ä¸ªæ¨¡æ¿ä½œä¸ºç‹¬ç«‹çš„JSONæ–‡ä»¶å­˜å‚¨åœ¨ `data/templates/` ç›®å½•ä¸‹
2. **æ–‡ä»¶åŒ¹é…**ï¼šé€šè¿‡è¡Œå·å’Œå‰ç¼€/åç¼€ç²¾ç¡®å®šä½é…ç½®é¡¹åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®
3. **å€¼æå–**ï¼šæ ¹æ®å‰ç¼€/åç¼€è§„åˆ™ä»æ–‡ä»¶è¡Œä¸­æå–å½“å‰é…ç½®å€¼
4. **æ‰¹é‡ä¿®æ”¹**ï¼šæŒ‰æ–‡ä»¶åˆ†ç»„ï¼Œä¸€æ¬¡æ€§åº”ç”¨æ‰€æœ‰ä¿®æ”¹ï¼Œä¿è¯æ•ˆç‡

## æ³¨æ„äº‹é¡¹

- è¯·ç¡®ä¿æœ‰è¶³å¤Ÿçš„æ–‡ä»¶è¯»å†™æƒé™
- å»ºè®®åœ¨ä¿®æ”¹é‡è¦é…ç½®æ–‡ä»¶å‰å…ˆå¤‡ä»½
- è¡Œå·ä»1å¼€å§‹è®¡æ•°
- å¦‚æœsuffixä¸ºç©ºï¼Œåˆ™æ›¿æ¢ä»prefixååˆ°è¡Œå°¾çš„æ‰€æœ‰å†…å®¹

## å¼€å‘è®¡åˆ’

- [ ] å®Œå–„çš„æ¨¡æ¿ç¼–è¾‘ç•Œé¢
- [ ] æ–‡ä»¶æœç´¢å’Œç›®æ ‡ç‚¹é…ç½®åŠŸèƒ½
- [ ] è‡ªåŠ¨å¤‡ä»½æœºåˆ¶
- [ ] æ›´ä¸°å¯Œçš„æ–‡ä»¶æ ¼å¼æ”¯æŒ
- [ ] é…ç½®éªŒè¯åŠŸèƒ½ 
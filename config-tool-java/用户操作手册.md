# 配置文件修改工具 - 用户操作手册

## 目录
1. [软件介绍](#软件介绍)
2. [启动与界面](#启动与界面)
3. [模板管理](#模板管理)
4. [配置项管理](#配置项管理)
5. [目标点管理](#目标点管理)
6. [配置应用](#配置应用)
7. [DFM模板功能](#dfm模板功能)
8. [常见问题](#常见问题)

## 软件介绍

### 软件概述
配置文件修改工具是一个专业的配置文件批量修改工具，支持多种配置文件格式（JSON、INI、XML、CONF、YAML、Properties、ENV等）的统一管理和修改。

### 核心功能
- **模板管理**：创建、编辑、删除配置模板
- **配置项管理**：管理配置项的名称、描述、默认值
- **目标点管理**：定义配置项在各个文件中的具体位置
- **批量配置**：一键应用配置到多个文件和位置
- **状态检查**：实时检查文件和配置项状态

### 适用场景
- 软件部署配置
- 环境迁移配置
- 批量配置文件更新
- 开发环境配置管理
- 系统配置标准化

## 启动与界面

### 启动方式（需要安装JDK）
双击 `run.bat` 文件
### 主界面布局
- **左侧边栏**：模板列表和管理操作
- **主工作区**：配置项列表、目标点管理、配置应用

![1751511054315](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1751511054315.png)

## 模板管理

### 创建新模板
1. 点击左侧边栏的 **"新建模板"** 按钮
2. 在弹出的对话框中填写：
   - **模板名称**：给模板起一个有意义的名称
   - **模板描述**：描述模板的用途和包含的配置项
3. 点击 **"确定"** 创建模板

### 编辑现有模板
1. 在模板列表中点击要编辑的模板
2. 模板信息会显示在主工作区
3. 可以修改模板的基本信息、配置项和目标点

### 删除模板
1. 在模板列表中找到要删除的模板
2. 点击模板右侧的 **"删除"** 按钮
3. 确认删除操作

## 配置项管理

### 添加配置项
1. 选择一个模板后，点击 **"新增配置项"** 按钮
2. 在弹出的对话框中填写：
   - **配置项名称**：如"数据库IP"、"端口号"等
   - **配置项描述**：详细说明配置项的作用
   - **默认值**：可选，设置配置项的默认值
3. 点击 **"确定"** 创建配置项

### 编辑配置项
1. 在配置项列表中点击要编辑的配置项
2. 点击 **"编辑"** 按钮
3. 修改配置项的名称、描述等信息
4. 点击 **"保存"** 确认修改

### 删除配置项
1. 选择要删除的配置项
2. 点击 **"删除"** 按钮
3. 确认删除操作（注意：删除配置项会同时删除其所有目标点）

### 配置项状态
配置项会显示不同的状态：
- **绿色圆点**：所有目标点状态正常
- **红色圆点**：存在错误的目标点

## 目标点管理

### 什么是目标点
目标点定义了配置项在具体文件中的位置，包括：
- **文件路径**：要修改的配置文件位置
- **行号**：配置项所在的行数
- **前缀**：用于定位配置项的前缀文本
- **后缀**：可选的后缀文本

### 添加目标点
1. 选择一个配置项后，点击 **"新增目标点"** 按钮
2. 填写目标点信息：
   - **文件路径**：绝对路径
   - **前缀**：用于定位的关键字，如`host =`、`<port>`等
   - **后缀**：可选，如`</port>`等
3. 点击 **"查找匹配项"** 验证目标点是否正确
4. 点击 **"确定"** 保存目标点

### 删除目标点
1. 选择要删除的目标点
2. 点击 **"删除"** 按钮
3. 确认删除操作

## 配置应用

### 准备工作
1. 确保所有目标点状态正常（绿色勾号）
2. 确认有足够的文件读写权限

### 应用步骤
1. 选择要应用的模板
2. 在配置项列表中填写各项配置的值
3. 确认无误后点击 **"应用配置"** 按钮
4. 等待应用完成，查看结果反馈

### 应用结果
- **成功**：显示成功修改的文件和配置项数量

## DFM模板功能

### DFM模板概述
DFM模板是专门为DFM系统设计的配置模板，具有以下特点：
- 自动生成基于环境变量和当前包路径的配置模板
- 支持DFM密码自动加密处理
- 包含常用的DFM配置项

### 生成DFM模板
1. 点击 **"生成DFM模板"** 按钮
2. 系统会自动：
   - 读取 `data/environment-vars.ini` 中的环境变量配置
   - 基于 `data/skeletons/dfm-skeleton.json` 生成完整模板
   - 创建带有时间戳的新模板

### DFM密码加密
- 系统会自动识别需要加密的配置项（目标点ID为"passed"）
- 应用配置时自动使用DFM加密算法处理密码
- 用户只需输入原始密码，系统自动完成加密

### 环境变量配置
编辑 `data/environment-vars.ini` 文件来配置环境变量：
```ini
[dfm_config]
environment_variables=KMDFM_DIR_NX_64,KMDFM_DIR_PTC_64
```

## 文件结构

config-tool-java/
├── config-tool-java-1.0.0.jar  # 主程序文件
├── run.bat                            # 简单启动脚本
├── 用户操作手册                          # 详细使用说明
├── data/                              # 数据文件目录

├──├──templates   # 配置模板文件（可以直接移动到不同环境进行加载）

├──├──skeletons\dfm-skeleton.json  #DFM半成品模板（可自定义修改）

## 常见问题

### 文件问题
**Q：目标点显示红色错误**
A：检查文件路径是否正确，文件是否存在，是否有读写权限

**Q：配置应用失败**
A：检查文件是否被其他程序占用，是否有写入权限

### 匹配问题
**Q：前缀匹配不到内容**
A：检查前缀是否完全匹配，注意空格和特殊字符

**Q：修改后的值不正确**
A：检查前缀和后缀设置是否正确

### DFM问题
**Q：DFM模板生成失败**
A：检查 `data/skeletons/dfm-skeleton.json` 文件是否完整，环境变量配置是否正确

**Q：密码加密不生效**
A：确保目标点的ID设置为"passed"，检查DFM加密配置